<!DOCTYPE html>
<html>
<head>
    <title>Google Maps with Places API</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD9AYeyskwcrm1_A8f_o0maHvMsBIiZ6BI&libraries=places"></script>
    <script>
        let map;
        let marker;
        let autocomplete;

        function initMap() {
            // 초기 위치 설정 (예: 도쿄)
            const initialLocation = { lat: 35.6895, lng: 139.6917 };

            map = new google.maps.Map(document.getElementById('map'), {
                center: initialLocation,
                zoom: 12
            });

            // 지도에 마커 추가
            marker = new google.maps.Marker({
                map: map,
                position: initialLocation,
                draggable: true
            });

            // 주소 자동 완성
            const input = document.getElementById('address');
            autocomplete = new google.maps.places.Autocomplete(input);
            autocomplete.bindTo('bounds', map);

            // 주소가 선택되면 지도 이동
            autocomplete.addListener('place_changed', function() {
                const place = autocomplete.getPlace();
                if (!place.geometry) {
                    alert("No details available for input: '" + place.name + "'");
                    return;
                }

                // 지도 중심을 새 위치로 이동
                map.setCenter(place.geometry.location);
                map.setZoom(15);  // 확대 수준 설정

                // 마커를 새 위치로 이동
                marker.setPosition(place.geometry.location);

                // 위도와 경도 표시
                document.getElementById('latitude').value = place.geometry.location.lat();
                document.getElementById('longitude').value = place.geometry.location.lng();
            });
        }
    </script>
    <style>
        /* 간단한 스타일링 */
        #map {
            height: 350px;
            width: 350px;
        }
    </style>
</head>
<body onload="initMap()">
<h1>Google Maps with Places API</h1>
<input type="text" id="address" placeholder="Enter address">
<br>
<label>Latitude: </label><input type="text" id="latitude" readonly>
<br>
<label>Longitude: </label><input type="text" id="longitude" readonly>
<div id="map"></div>
</body>
</html>
